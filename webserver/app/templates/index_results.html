<!--<html>

 <head>

    <title>{{title}} - microblog</title>

 </head>

 <body>

    {% if jsonresponse %}

    <h1>Hello, {{jsonresponse}}!</h1>

    {% else %}

    <h1>Hello, Insight Fellow!</h1>

    {% endif %}

 </body>

</html>-->
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 100%;
      }
.controls {
  margin-top: 10px;
  border: 1px solid transparent;
  border-radius: 2px 0 0 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  height: 32px;
  outline: none;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

#pac-input {
  background-color: #fff;
  font-family: Roboto;
  font-size: 15px;
  font-weight: 300;
  margin-left: 12px;
  padding: 0 11px 0 13px;
  text-overflow: ellipsis;
  width: 300px;
}

#pac-input:focus {
  border-color: #4d90fe;
}

.pac-container {
  font-family: Roboto;
}

#type-selector {
  color: #fff;
  background-color: #4d90fe;
  padding: 5px 11px 0px 11px;
}

#type-selector label {
  font-family: Roboto;
  font-size: 13px;
  font-weight: 300;
}

    </style>
    <title>Places Searchbox</title>
    <style>
      #target {
        width: 345px;
      }
    </style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

  </head>
  <body style="height:87%" >
  <p id="title">UTC Clock</p>

  <p id="clock">Current Time</p>
    <input id="pac-input" class="controls" type="text" placeholder="Search Box">
    <div id="map" style="height:100%; width:95%;margin: 100px auto 10px auto;border-color:blue; border-radius:20px;border-style:solid"></div>
    <br/>
    <div id="tempDiv" onclick="testFunction({{ originalLatitude }},{{ originalLongitude }})"></div>
      <center><h1>STATISTICS </h1>
      <h2>{{ jsonresponse }}</h2>
      </center>

  <!--    <form id="fetchCrimesData" class="form-inline" action="/api/34.444/35.555/" method="POST">
              <div class="form-group text-center">
                      <div class="input-group">
                              <input style="border-radius:4px;" type="text" class="form-control" name="latitudeName" id="latitudeName" placeholder="username" value="444.4444">
                              <input style="border-radius:4px;" type="text" class="form-control" name="longitudeName" id="longitudeName" placeholder="username" value="5555.5555">
                      </div>
                      <button type="submit" value="Send" name="username-container" class="btn btn-default id-submit">Submit</button>
              </div>
      </form>
-->

    <form id="fetchCrimesData" class="form-inline" action="/index_results" method="POST">
              <div class="form-group text-center">
                      <div class="input-group">
                              <input style="border-radius:4px;" type="text" class="form-control" name="latitudeName" id="latitudeName" placeholder="username" value="444.4444">
                              <input style="border-radius:4px;" type="text" class="form-control" name="longitudeName" id="longitudeName" placeholder="username" value="5555.5555">
                  </div>
                      <button type="submit" value="Send" name="username-container" class="btn btn-default id-submit">Submit</button>
              </div>
    </form>


<script>

latitudeTemp = 0.0;
longitudeTemp = 0.0;

$(document).ready(function(){
    $("#tempDiv").trigger('click');
}); 


function testFunction(jsonObject, longitude) {
  alert('jsonObject is: '+ jsonObject);
  alert('longitude is: '+ longitude);
  latitudeTemp = jsonObject;
  longitudeTemp = longitude;
}

function anyFunction()

{

  function fixTimeFormat(i) {

      return ( i < 10 ) ? "0" + i : i;

  }

  var today = new Date(),

      h = fixTimeFormat(today.getHours()),

      m = fixTimeFormat(today.getMinutes()),

      s = fixTimeFormat(today.getSeconds());

      document.getElementById("clock").innerHTML = h + ":" + m + ":" + s;
      document.getElementById('latitudeName').value = latitudeTemp;
      document.getElementById('longitudeName').value = longitudeTemp;
      //alert("latitudeTemp is:"+latitudeTemp + " and longitudeTemp is: " + longitudeTemp);
      document.getElementById('fetchCrimesData').submit();
}


$(function () {

  setInterval(anyFunction, 10000);

});


</script>




    <script>
// This example adds a search box to a map, using the Google Place Autocomplete
// feature. People can enter geographical searches. The search box will return a
// pick list containing a mix of places and predicted search terms.

function initAutocomplete() {
  var citymap = {
  chicago: {
      center: {lat: 41.878, lng: -87.629},
      population: 2714856
    },
    newyork: {
      center: {lat: 40.714, lng: -74.005},
      population: 8405837
    },
    losangeles: {
      center: {lat: 34.052, lng: -118.243},
      population: 3857799
    },
    vancouver: {
      center: {lat: 49.25, lng: -123.1},
      population: 603502
    }
  };

  var map = new google.maps.Map(document.getElementById('map'), {
    center: citymap['losangeles'].center,
    zoom: 9,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  // Create the search box and link it to the UI element.
  var input = document.getElementById('pac-input');
  var searchBox = new google.maps.places.SearchBox(input);
  map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

  // Bias the SearchBox results towards current map's viewport.
  map.addListener('bounds_changed', function() {
    searchBox.setBounds(map.getBounds());
  });

  var markers = [];
  // [START region_getplaces]
  // Listen for the event fired when the user selects a prediction and retrieve
  // more details for that place.
  searchBox.addListener('places_changed', function() {
    var places = searchBox.getPlaces();

    if (places.length == 0) {
      return;
    }

    // Clear out the old markers.
    markers.forEach(function(marker) {
      marker.setMap(null);
    });
    markers = [];

    // For each place, get the icon, name and location.
    var bounds = new google.maps.LatLngBounds();
    places.forEach(function(place) {

    /*      latitude = place.geometry.location.lat();
      longitude = place.geometry.location.lng();
      alert('latitude is:' + latitude);
      alert('longitude is:' + longitude);
      document.getElementById('latitudeName').value = latitude;
      document.getElementById('longitudeName').value = longitude;
      document.getElementById('fetchCrimesData').submit();
*/
      var icon = {
        url: place.icon,
        size: new google.maps.Size(71, 71),
        origin: new google.maps.Point(0, 0),
        anchor: new google.maps.Point(17, 34),
        scaledSize: new google.maps.Size(25, 25)
      };

    var cityCircle = new google.maps.Circle({
      strokeColor: '#FF0000',
      strokeOpacity: 0.8,
      strokeWeight: 2,
      fillColor: '#FF0000',
      fillOpacity: 0.35,
      map: map,
      center: place.geometry.location,
      radius: 5000
    });

      // Create a marker for each place.
      markers.push(new google.maps.Marker({
        map: map,
        icon: icon,
        title: place.name,
        position: place.geometry.location
      }));

      if (place.geometry.viewport) {
        // Only geocodes have viewport.
        bounds.union(place.geometry.viewport);
      } else {
        bounds.extend(place.geometry.location);
      }
    });
    map.fitBounds(bounds);
    map.setZoom(9);
  });
  // [END region_getplaces]
}


    </script>

    <script src="https://maps.googleapis.com/maps/api/js?libraries=places&callback=initAutocomplete"
         async defer></script>
  </body>
</html>
